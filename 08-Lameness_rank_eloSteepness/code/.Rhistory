# set method type
method_type = 3
#load packages and data
library(ggplot2)
library(lubridate)
library(EloRating)
library(tidyr)
library(dplyr)
library(viridis)
library(car)
library(corrplot)
library(EloSteepness)
library(EloSteepness_ro1)
library(EloSteepness)
library("here")
install.packages("here")
library("here")
cur_dir <- here()
cur_dir
setwd("C:/Users/skysheng/OneDrive - UBC/R package project and Git/lameness_rank/08-Lameness_rank_eloSteepness/code")
library(EloRating)
library(EloSteepness)
library(RColorBrewer)
library(dplyr)
library(irr)
library(gridExtra)
library(ggplot2)
source("eloSteepness_helpers.R")
# load in the data
# all 55 HITs' response
click_worker_dir <- "../../07-Amazon_MTurk_click_worker_response_30cow_pairwise/results/"
winner_loser <- read.csv(paste0(click_worker_dir, "winner_loser_55HITs.csv"), header = TRUE, sep = ",")
cowLR <- read.csv(paste0(click_worker_dir,"cowLR_response_clickWorker_55HITS.csv"), header = TRUE, sep = ",")
# each of the 55 HITs have the same number of workers
winner_loser_sampled <- read.csv(paste0(click_worker_dir,"winner_loser_sampled_55HITs.csv"), header = TRUE, sep = ",")
cowLR_sampled <- read.csv(paste0(click_worker_dir,"cowLR_response_clickWorker_sampled_55HITS.csv"), header = TRUE, sep = ",")
# 55 HITs: delete all responses between the 2 cows if average click worker response is (-1, 1)
winner_loser_sampled_delete <- read.csv(paste0(click_worker_dir,"winner_loser_sampled_delete_pairs_55HITs.csv"), header = TRUE, sep = ",")
# 55 HITs: if average click worker response is between (-1, 1) create
# min_worker_num/2 A wins B, min_worker_num/2 B wins A
winner_loser_sampled_exchannge0 <- read.csv(paste0(click_worker_dir,"winner_loser_sampled_exchange0_55HITs.csv"), header = TRUE, sep = ",")
# 55 HITs: if average click worker response is between (-1, 1) create
# min_worker_num/2 A wins B, min_worker_num/2 B wins A
winner_loser_sampled_ind_exchannge0 <- read.csv(paste0(click_worker_dir,"winner_loser_sampled_ind_exchange0_55HITs.csv"), header = TRUE, sep = ",")
# 5 milestone cows: min number of comparisons
winner_loser_milestone_min <- read.csv(paste0(click_worker_dir,'winner_loser_milestone_min_55HITs.csv'), header = TRUE, sep = ",")
# 5 milestone cows: maximum number of comparisons
winner_loser_milestone_max <- read.csv(paste0(click_worker_dir,'winner_loser_milestone_max_55HITs.csv'), header = TRUE, sep = ",")
# 12 rounds of expert traditional gait score
expert_gs_dir <- "../../03-30cow_GS_label_expert_response/results/"
gs_record <- read.csv(paste0(expert_gs_dir, "gs_response_combined_avg.csv"), header = TRUE, sep = ",")
gs_record2 <- gs_record[, c("Cow", "GS")]
# load experts' eloSteepness results
expert_elo_dir <-"../results/"
expert_eloSteep <- read.csv(paste0(expert_elo_dir, "compare_summary.csv"), header = TRUE, sep = ",")
expert_eloSteep$X <- NULL
output_dir <- "../results/"
click_worker_experts <- read.csv("../results/compare_summary.csv", header = TRUE)
correlation_change_increment <- icc_change_worker_num_increamental(
random_rounds = 10, worker_num_seq = c(10), unknown_freq_max = 0.9,
cowLR_df = cowLR, click_worker_experts, expert_col_name = "NV_DW_SB_experts_mean")
warnings()
