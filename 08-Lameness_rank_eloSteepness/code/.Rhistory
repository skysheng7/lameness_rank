xaxs = "i", axes = FALSE, xlab = "", ylab = "", bg = "white", xaxt = "n", yaxt = "n") # Turn off automatic axis plotting
# Add x-axis with tick marks
axis(1, at = seq(1, 31, by = 4), cex.axis = 2) # Adjust font size with cex.axis
# Adjust the distance of axis labels
title(ylab = "Density", line = 0.5, cex.lab=5) # Increase font size and adjust distance
title(xlab = xlab, line = 4.5, cex.lab=5) # Increase font size and adjust distance
# draw the filled posteriors
for (i in seq_len(ncol(res))) {
p <- pdata[[i]]
p$x[p$x > (n_ids - 1)] <- n_ids - 1
p$x[p$x < 0] <- 0
polygon(c(p$x, rev(p$x)), c(rep(0, length(p$x)), rev(p$y)),
border = NA, col = cols[i])
}
# draw the contours
for (i in seq_len(ncol(res))) {
p <- pdata[[i]]
p$x[p$x > (n_ids - 1)] <- n_ids - 1
p$x[p$x < 0] <- 0
polygon(c(p$x, rev(p$x)), c(rep(0, length(p$x)), rev(p$y)), border = border_cols[i])
}
}
save_plot_score(elo_baysian_result, paste0("../plots/", type, "_", assessor), gs_record2)
View(gs_expert_compare)
colnames(click_worker_experts)
expert_worker_compare <- click_worker_experts[, c("Cow", "all_click_worker_mean", "NV_DW_SB_experts_mean")]
expert_workercompare_process <- expert_worker_compare[, 2:ncol(expert_worker_compare)]
expert_workercompare_icc_value <- icc(expert_workercompare_process, model = "twoway", type = "agreement", unit = "single")$"value"
expert_workercompare_icc_value
View(expert_compare_process)
View(expert_workercompare_process)
View(elo_baysian_result)
test<-elo_baysian_result[["cumwinprobs"]]
View(elo_baysian_result)
scores(elo_baysian_reuslt)
scores(elo_baysian_result)
worker_all_score <- read.csv("../results/large files/all_click_worker_cumwinprobs.csv", header = TRUE)
expt_all_score <- read.csv("../results/large files/NV_DW_SB_experts_cumwinprobs.csv", header = TRUE)
str(worker_all_score)
View(worker_all_score)
names(worker_all_score) <- sub("^X", "", names(worker_all_score))
View(worker_all_score)
names(expt_all_score) <- sub("^X", "", names(expt_all_score))
View(expt_all_score)
str(worker_all_score)
library(tidyverse)
long_df <- worker_all_score %>%
pivot_longer(
everything(),
names_to = "Cow",
values_to = "worker_prob"
) %>%
mutate(
Cow = as.numeric(Cow)  # Convert Cow column to numeric if needed
)
View(long_df)
load("C:/Users/skysheng/OneDrive - The University Of British Columbia/R package project and Git/lameness_rank/08-Lameness_rank_eloSteepness/results/large files/NV_DW_SB_experts_elo_baysian.rdata")
load("../results/large files/all_click_worker_elo_baysian.rdata")
worker_basyeian <- elo_baysian_result
load("../results/large files/NV_DW_SB_experts_elo_baysian.rdata", header = TRUE)
# plot to compare the summed elo winning probability from experts and from crowd workers
load("../results/large files/all_click_worker_elo_baysian.rdata")
worker_basyeian <- elo_baysian_result
load("../results/large files/NV_DW_SB_experts_elo_baysian.rdata")
expt_basyeian <- elo_baysian_result
load("../results/large files/all_click_worker_elo_baysian.rdata")
worker_basyeian <- elo_baysian_result
worker_score <- scores(worker_basyeian)
load("../results/large files/NV_DW_SB_experts_elo_baysian.rdata")
expt_basyeian <- elo_baysian_result
expt_score <- scores(expt_basyeian)
View(expt_score)
View(worker_score)
colnames(worker_score)
# plot to compare the summed elo winning probability from experts and from crowd workers
load("../results/large files/all_click_worker_elo_baysian.rdata")
worker_basyeian <- elo_baysian_result
worker_score <- scores(worker_basyeian)
worker_score<- worker_score[, c("id", "mean", "q045", "q955")]
names(worker_score) <- c("id", "worker_mean", "worker_q045", "worker_q955")
load("../results/large files/NV_DW_SB_experts_elo_baysian.rdata")
expt_basyeian <- elo_baysian_result
expt_score <- scores(expt_basyeian)
expt_score<- expt_score[, c("id", "mean", "q045", "q955")]
names(expt_score) <- c("id", "expert_mean", "expert_q045", "expert_q955")
worker_expt_sum <- merge(worker_score, expt_score)
View(worker_expt_sum)
str(worker_expt_sum)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_rect(aes(xmin = expert_q045, xmax = expert_q955, ymin = worker_q045, ymax = worker_q955, fill = id), alpha = 0.3) +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning probability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 16),
axis.title.x = element_text(size = 14),
axis.title.y = element_text(size = 14)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../results/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_rect(aes(xmin = expert_q045, xmax = expert_q955, ymin = worker_q045, ymax = worker_q955, fill = id), alpha = 0.3) +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning probability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 55),
axis.text.x = element_text(size = 50),
axis.text.y = element_text(size = 50)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_rect(aes(xmin = expert_q045, xmax = expert_q955, ymin = worker_q045, ymax = worker_q955, fill = id), alpha = 0.3) +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning probability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 40),
axis.text.x = element_text(size = 35),
axis.text.y = element_text(size = 35)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_rect(aes(xmin = expert_q045, xmax = expert_q955, ymin = worker_q045, ymax = worker_q955, fill = id), alpha = 0.3) +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning probability \nfrom crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 40),
axis.text.x = element_text(size = 35),
axis.text.y = element_text(size = 35)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_rect(aes(xmin = expert_q045, xmax = expert_q955, ymin = worker_q045, ymax = worker_q955, fill = id), alpha = 0.3) +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 40),
axis.text.x = element_text(size = 35),
axis.text.y = element_text(size = 35)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_rect(aes(xmin = expert_q045, xmax = expert_q955, ymin = worker_q045, ymax = worker_q955, fill = id), alpha = 0.3) +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 25),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_rect(aes(xmin = expert_q045, xmax = expert_q955, ymin = worker_q045, ymax = worker_q955, fill = id), alpha = 0.3) +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 25),
axis.text.x = element_text(size = 35),
axis.text.y = element_text(size = 35)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_rect(aes(xmin = expert_q045, xmax = expert_q955, ymin = worker_q045, ymax = worker_q955, fill = id), alpha = 0.3) +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 30),
axis.text.x = element_text(size = 35),
axis.text.y = element_text(size = 35)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
install.packages("ggforce")
library(ggforce)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_ellipse(aes(x0 = (expert_q045 + expert_q955) / 2,
y0 = (worker_q045 + worker_q955) / 2,
a = (expert_q955 - expert_q045) / 2,
b = (worker_q955 - worker_q045) / 2,
fill = id), alpha = 0.3) +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 30),
axis.text.x = element_text(size = 35),
axis.text.y = element_text(size = 35)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_ellipse(aes(x0 = (expert_q045 + expert_q955) / 2,
y0 = (worker_q045 + worker_q955) / 2,
a = (expert_q955 - expert_q045) / 2,
b = (worker_q955 - worker_q045) / 2,
angel = 0
fill = id), alpha = 0.3) +
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_ellipse(aes(x0 = (expert_q045 + expert_q955) / 2,
y0 = (worker_q045 + worker_q955) / 2,
a = (expert_q955 - expert_q045) / 2,
b = (worker_q955 - worker_q045) / 2,
angel = 0,
fill = id), alpha = 0.3) +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 30),
axis.text.x = element_text(size = 35),
axis.text.y = element_text(size = 35)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_ellipse(aes(x0 = (expert_q045 + expert_q955) / 2,
y0 = (worker_q045 + worker_q955) / 2,
a = (expert_q955 - expert_q045) / 2,
b = (worker_q955 - worker_q045) / 2,
angle = 0,
fill = id), alpha = 0.3)  +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 30),
axis.text.x = element_text(size = 35),
axis.text.y = element_text(size = 35)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_ellipse(aes(x0 = (expert_q045 + expert_q955) / 2,
y0 = (worker_q045 + worker_q955) / 2,
a = (expert_q955 - expert_q045) / 2,
b = (worker_q955 - worker_q045) / 2,
angle = 0,
fill = id), alpha = 0.3, color = NA)  +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 30),
axis.text.x = element_text(size = 35),
axis.text.y = element_text(size = 35)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_ellipse(aes(x0 = (expert_q045 + expert_q955) / 2,
y0 = (worker_q045 + worker_q955) / 2,
a = (expert_q955 - expert_q045) / 2,
b = (worker_q955 - worker_q045) / 2,
angle = 0,
fill = id), alpha = 0.3, color = NA)  +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 25),
axis.text.x = element_text(size = 40),
axis.text.y = element_text(size = 40)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_ellipse(aes(x0 = (expert_q045 + expert_q955) / 2,
y0 = (worker_q045 + worker_q955) / 2,
a = (expert_q955 - expert_q045) / 2,
b = (worker_q955 - worker_q045) / 2,
angle = 0,
fill = id), alpha = 0.3, color = NA)  +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 40),
axis.text.x = element_text(size = 25),
axis.text.y = element_text(size = 25)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
# Create the plot
elo_plot <- ggplot(worker_expt_sum, aes(x = expert_mean, y = worker_mean)) +
geom_point(aes(color = id), alpha = 0.9) +
geom_ellipse(aes(x0 = (expert_q045 + expert_q955) / 2,
y0 = (worker_q045 + worker_q955) / 2,
a = (expert_q955 - expert_q045) / 2,
b = (worker_q955 - worker_q045) / 2,
angle = 0,
fill = id), alpha = 0.3, color = NA)  +
labs(
x = "Summed Elo winning probability \nfrom experienced assessors",
y = "Summed Elo winning \nprobability from crowd workers"
) +
guides(
color = "none",  # hide the color legend
fill = "none"    # hide the fill legend
) +
theme_classic() +
theme(
text = element_text(size = 35),
axis.text.x = element_text(size = 25),
axis.text.y = element_text(size = 25)
) +
scale_x_continuous(limits = c(1, 30)) +
scale_y_continuous(limits = c(1, 30))
# Save the plot
ggsave("../plots/expert_crowd_worker_hiearchy_compare.png", plot = elo_plot, width = 10, height = 8, limitsize = FALSE)
View(expt_score)
library(EloRating)
library(EloSteepness)
library(RColorBrewer)
library(irr)
library(viridis)
library(tidyverse)
library(ggforce)
source("eloSteepness_helpers.R")
# load in the data
expert_dir <- "../../05-Amazon_MTurk_expert_response_30cow_pairwise/results/all_experts/"
winner_loser <- read.csv(paste0(expert_dir, "winner_loser_merged.csv"), header = TRUE, sep = ",")
winner_loser_no_slip <- winner_loser[-which((winner_loser$winner %in% c(4035)) | (winner_loser$loser %in% c(4035))),]
expert_gs_dir <- "../../03-30cow_GS_label_expert_response/results/"
gs_record <- read.csv(paste0(expert_gs_dir, "gs_response_combined_avg.csv"), header = TRUE, sep = ",")
gs_record2 <- gs_record[, c("Cow", "GS")]
output_dir <- "../results/"
#elo_result_master <- read.csv(paste0(output_dir, "compare_summary.csv"), header = TRUE, sep = ",")
# replicate row is degree > 1
winner_loser_degree_replct <- replicate_row_df(winner_loser)
click_worker_experts <- read.csv("../results/compare_summary.csv", header = TRUE)
View(click_worker_experts)
expert_compare <- click_worker_experts[, c("Cow", "DW_experts_mean", "NV_experts_mean", "SB_experts_mean")]
expert_compare_process <- expert_compare[, 2:ncol(expert_compare)]
expert_compare_icc_value <- icc(expert_compare_process, model = "twoway", type = "agreement", unit = "single")$"value"
expert_compare_icc_value
expert_compare_icc_value <- icc(expert_compare_process, model = "twoway", type = "consistency", unit = "single")$"value"
expert_compare_icc_value
expert_compare_icc_value <- icc(expert_compare_process, model = "twoway", type = "consistency", unit = "average")$"value"
expert_compare_icc_value
expert_compare_icc_value <- icc(expert_compare_process, model = "twoway", type = "agreement", unit = "average")$"value"
expert_compare_icc_value <- icc(expert_compare_process, model = "twoway", type = "agreement", unit = "single")$"value"
# calculate the ICC between experts and click worker for lameness hierarchy
expert_worker_compare <- click_worker_experts[, c("Cow", "all_click_worker_mean", "NV_DW_SB_experts_mean")]
expert_worker_compare_process <- expert_worker_compare[, 2:ncol(expert_worker_compare)]
expert_worker_compare_icc_value <- icc(expert_worker_compare_process, model = "twoway", type = "consistency", unit = "single")$"value"
expert_worker_compare_icc_value
# load packages
library(ggplot2)
library(lubridate)
library(pdftools)
library("plyr")
library(tidyverse)
library(irr)
library(corrplot)
library(clValid)
library(gridExtra)
library(grid)
source("55HIT_easy_hard_question_assess_helpers.R")
